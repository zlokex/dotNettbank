@model List<dotNettbankAdmin.Models.AuditEntryVM>

<div class="panel panel-default" data-id="Accounts">
    <div class="panel-heading">
        <h3>Database revisjon</h3>
    </div>
    <!-- SØKE FELT-->
    <div id="custom-search-input">
        <div class="input-group col-md-12">
            <input type="text" id="search" class="form-control input-lg" placeholder="Søk blant kontoer..." />
            <span class="input-group-btn">
                <button class="btn btn-info btn-lg" type="button">
                    <i class="glyphicon glyphicon-search"></i>
                </button>
            </span>
        </div>
    </div>

    <div class="panel-body">
        <!-- TABLE -->
        <table class="table audit-table" id="audit-table">
            <thead class="thead-inverse">
                <tr>
                    <th>Dato</th>
                    <th>Entitet</th>
                    <th>Operasjon</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model)
            {
                    <tr>
                        <td class="col-md-2">@Html.DisplayFor(modelItem => item.Date)</td>
                        <td class="col-md-2">@Html.DisplayFor(modelItem => item.EntityName)</td>
                        <td class="col-md-4">@Html.DisplayFor(modelItem => item.State)</td>
                        <td class="col-md-1"><button class="btn btn-dark-theme" id="edit_btn" data-toggle="collapse" data-target="#@item.AuditEntryID"><i class="fa fa-pencil"></i> Vis detaljer</button></td>
                    </tr>
                    <tr>
                        <td colspan="4" class="hiddenRow">
                            <div id="@item.AuditEntryID" class="collapse">
                                <div class="row">
                                    <div class="col-lg-4 col-md-4 col-sm-4"><b>Felt</b></div>
                                    <div class="col-lg-4 col-md-4 col-sm-4"><b>Gammel verdi</b></div>
                                    <div class="col-lg-4 col-md-4 col-sm-4"><b>Ny Verdi</b></div>
                                </div>
                                @foreach (var property in item.EntryProperties)
                                {
                                    <div class="row">
                                        <div class="col-lg-4 col-md-4 col-sm-4">@Html.DisplayFor(modelItem => property.PropertyName)</div>
                                        <div class="col-lg-4 col-md-4 col-sm-4">@Html.DisplayFor(modelItem => property.OldValue)</div>
                                        <div class="col-lg-4 col-md-4 col-sm-4">@Html.DisplayFor(modelItem => property.NewValue)</div>
                                    </div>
                                }
                            </div>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>

<script src="~/Scripts/AdminPartials.js"></script>